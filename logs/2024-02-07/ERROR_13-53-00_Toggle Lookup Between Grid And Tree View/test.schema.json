{
    "id": "Toggle Lookup Between Grid And Tree View",
    "sequences": [
        {
            "caption": "TC1: Toggle Lookup Between Tree and Grid View",
            "process": "main"
        }
    ],
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/contoso/daily/#dashboard/PlaceholderAssetType",
                    "refresh": true
                },
                "next_step": "wait_for_dashboard_to_be_ready",
                "name": "start"
            },
            "wait_for_dashboard_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#dashboard-grid",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "filter_record",
                "name": "wait_for_dashboard_to_be_ready"
            },
            "filter_record": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "filterRecord",
                    "process": "filter_for_record",
                    "parameters": {
                        "fetch_all_records_selector": "[for='dashboard-grid'] #prepared-fetch",
                        "filter_button_selector": "#search-button",
                        "filter_input_selector": "#pb-1 #rd-1 .responsive-dropdown-filter input",
                        "filter_value": "2030*XWINGL",
                        "internal_filter_btn_selector": ".dashboard #filter"
                    }
                },
                "next_step": "open_record",
                "name": "filter_record"
            },
            "open_record": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": ".grid-row"
                },
                "next_step": "open_assist",
                "name": "open_record"
            },
            "open_assist": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "button#assist"
                },
                "next_step": "set_linked",
                "name": "open_assist"
            },
            "set_linked": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#btn-SetPlaceholder"
                },
                "next_step": "wait_for_tree",
                "name": "set_linked"
            },
            "wait_for_tree": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "asset-type-tree[status='ready']"
                },
                "next_step": "click_grid",
                "name": "wait_for_tree"
            },
            "click_grid": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#switch-view [data-value='grid']"
                },
                "next_step": "wait_for_grid",
                "name": "click_grid"
            },
            "wait_for_grid": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#assetTypeCode-lookup[status='ready'][data-loaded='true']"
                },
                "next_step": "wait_on_profiles",
                "name": "wait_for_grid"
            },
            "wait_on_profiles": {
                "type": "wait",
                "action": "time",
                "args": {
                    "timeout": 0.5
                },
                "next_step": "select_profiles",
                "name": "wait_on_profiles"
            },
            "select_profiles": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#profiles"
                },
                "next_step": "click_save_profile",
                "name": "select_profiles"
            },
            "click_save_profile": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[icon-name='saveNew']"
                },
                "next_step": "wait_for_save_profile",
                "name": "click_save_profile"
            },
            "wait_for_save_profile": {
                "type": "wait",
                "action": "time",
                "args": {
                    "timeout": 0.5
                },
                "next_step": "fill_profile_name",
                "name": "wait_for_save_profile"
            },
            "fill_profile_name": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "[aria-label='Profile Name']",
                    "value": "Swap Lookup Test Between Grid View And Tree View"
                },
                "next_step": "click_accept",
                "name": "fill_profile_name"
            },
            "click_accept": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".small.dialog-card #accept"
                },
                "next_step": "wait_for_grid_after_save",
                "name": "click_accept"
            },
            "wait_for_grid_after_save": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#assetTypeCode-lookup[status='ready'][data-loaded='true']"
                },
                "next_step": "wait_ready",
                "name": "wait_for_grid_after_save"
            },
            "wait_ready": {
                "type": "wait",
                "action": "time",
                "args": {
                    "timeout": 2
                },
                "next_step": "click_tree",
                "name": "wait_ready"
            },
            "click_tree": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#switch-view [data-value='tree']"
                },
                "next_step": "wait_for_tree_going_back",
                "name": "click_tree"
            },
            "wait_for_tree_going_back": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "asset-type-tree[status='ready']"
                },
                "next_step": "open_up_profiles",
                "name": "wait_for_tree_going_back"
            },
            "open_up_profiles": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#profiles"
                },
                "next_step": "select_profile",
                "name": "open_up_profiles"
            },
            "select_profile": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".tree-item:has([tooltip='Swap Lookup Test Between Grid View And Tree View'])"
                },
                "next_step": "wait_for_grid_after_profile",
                "name": "select_profile"
            },
            "wait_for_grid_after_profile": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#assetTypeCode-lookup[status='ready'][data-loaded='true']"
                },
                "next_step": "wait_for_options_toolbar",
                "name": "wait_for_grid_after_profile"
            },
            "wait_for_options_toolbar": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": " #switch-view[data-value='grid']"
                },
                "next_step": "click_profile_overflow",
                "name": "wait_for_options_toolbar"
            },
            "click_profile_overflow": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pr-profiles [data-name='Swap Lookup Test Between Grid View And Tree View'] [data-event='showItemMenu']"
                },
                "next_step": "click_remove",
                "name": "click_profile_overflow"
            },
            "click_remove": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "context-menu #removeProfile"
                },
                "next_step": "click_yes",
                "name": "click_remove"
            },
            "click_yes": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "dialog-component button[data-action='yes']"
                }
            }
        }
    }
}