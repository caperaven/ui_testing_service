{
    "id": "calendar",
    "sequences": [
        {
            "caption": "Display WO screen",
            "process": "main"
        },
        {
            "caption": "TC1: Display calendar and test navigation buttons",
            "process": "TC1"
        },
        {
            "caption": "TC2: Select date,month,and year on calendar",
            "process": "TC2"
        }
    ],
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/contoso/daily/#dashboard/WorkOrder"
                },
                "next_step": "create_uuid",
                "name": "start"
            },
            "create_uuid": {
                "type": "perform",
                "action": "set_uuid_variables",
                "args": {
                    "variables": [
                        "$d{id}"
                    ]
                },
                "next_step": "create_work_order_record_button",
                "name": "create_uuid"
            },
            "create_work_order_record_button": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "workOrderCreate",
                    "process": "work_order_create",
                    "parameters": {
                        "work_order_code": "9e47596c-2fac-47ad-b1ed-774b79e84d99",
                        "create_btn_selector": "#create",
                        "description_field_selector": "This is a test work required",
                        "work_required_field_selector": "This is a test work required"
                    }
                },
                "next_step": "perform_work_order_record_filtering",
                "name": "create_work_order_record_button"
            },
            "perform_work_order_record_filtering": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "filterRecord",
                    "process": "filter_for_record",
                    "parameters": {
                        "fetch_all_records_selector": "[for='dashboard-grid'] #prepared-fetch",
                        "filter_button_selector": "#pb-5 #rd-3 #search-button",
                        "filter_input_selector": "#pb-5 #rd-3 .responsive-dropdown-filter input",
                        "filter_value": "9e47596c-2fac-47ad-b1ed-774b79e84d99",
                        "internal_filter_btn_selector": ".dashboard pr-responsive-dropdown#rd-3 #filter"
                    }
                },
                "next_step": "wait_for_record_to_be_available",
                "name": "perform_work_order_record_filtering"
            },
            "wait_for_record_to_be_available": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "select_work_order_record",
                "name": "wait_for_record_to_be_available"
            },
            "select_work_order_record": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "name": "select_work_order_record"
            }
        }
    },
    "TC1": {
        "steps": {
            "start": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#overview"
                },
                "next_step": "open_planning_tab",
                "name": "start"
            },
            "open_planning_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[data-id='planning']"
                },
                "next_step": "wait_for_planning_tab_to_be_visible",
                "name": "open_planning_tab"
            },
            "wait_for_planning_tab_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#planning"
                },
                "next_step": "perform_hover_on_date_picker_button",
                "name": "wait_for_planning_tab_to_be_visible"
            },
            "perform_hover_on_date_picker_button": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "system",
                    "process": "tooltip",
                    "parameters": {
                        "hover": "[id='model.startOn'] [name='datePicker']",
                        "value": "Open Date Picker"
                    }
                },
                "next_step": "click_date_picker_button",
                "name": "perform_hover_on_date_picker_button"
            },
            "click_date_picker_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[id='model.startOn'] [name='datePicker']"
                },
                "next_step": "wait_for_dialog_to_be_visible",
                "name": "click_date_picker_button"
            },
            "wait_for_dialog_to_be_visible": {
                "type": "wait",
                "action": "is_ready",
                "args": {
                    "query": "#main-view dialog-component",
                    "attr": "data-ready",
                    "value": "true"
                },
                "next_step": "wait_for_calendar_to_be_visible",
                "name": "wait_for_dialog_to_be_visible"
            },
            "wait_for_calendar_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#calendar-component #calendar"
                },
                "next_step": "assert_current_view_is_date_view",
                "name": "wait_for_calendar_to_be_visible"
            },
            "assert_current_view_is_date_view": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "#calendar-component #perspectiveElement",
                    "attr": "data-view",
                    "value": "default",
                    "operator": "eq"
                },
                "next_step": "click_next_button",
                "name": "assert_current_view_is_date_view"
            },
            "click_next_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#calendar-component #calendar-toolbar [id='next-month']"
                },
                "next_step": "click_previous_button",
                "name": "click_next_button"
            },
            "click_previous_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#calendar-component #calendar-toolbar [id='previous-month']"
                },
                "name": "click_previous_button"
            }
        }
    },
    "TC2": {
        "steps": {
            "start": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "#calendar-component #perspectiveElement",
                    "attr": "data-view",
                    "value": "default",
                    "operator": "eq"
                },
                "next_step": "select_month_view",
                "name": "start"
            },
            "select_month_view": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#calendar-component #calendar-toolbar #month"
                },
                "next_step": "wait_for_month_view_perspective_element",
                "name": "select_month_view"
            },
            "wait_for_month_view_perspective_element": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#calendar-component #perspectiveElement"
                },
                "next_step": "wait_month_view_is_visible",
                "name": "wait_for_month_view_perspective_element"
            },
            "wait_month_view_is_visible": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#calendar-component #perspectiveElement",
                    "attr": "data-view",
                    "value": "months"
                },
                "next_step": "select_a_month",
                "name": "wait_month_view_is_visible"
            },
            "select_a_month": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#calendar-component #months [data-value='0']"
                },
                "next_step": "wait_for_calendar_to_be_visible",
                "name": "select_a_month"
            },
            "wait_for_calendar_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#calendar-component"
                },
                "next_step": "assert_current_view",
                "name": "wait_for_calendar_to_be_visible"
            },
            "assert_current_view": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "#calendar-component #perspectiveElement",
                    "attr": "data-view",
                    "value": "default",
                    "operator": "eq"
                },
                "next_step": "assert_selected_month",
                "name": "assert_current_view"
            },
            "assert_selected_month": {
                "type": "assert",
                "action": "text_content_eq",
                "args": {
                    "query": "#calendar-component #calendar-toolbar #month",
                    "value": "February",
                    "property": "textContent"
                },
                "next_step": "select_a_year_button",
                "name": "assert_selected_month"
            },
            "select_a_year_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#calendar-component #calendar-toolbar #year"
                },
                "next_step": "wait_for_perspective_element"
            },
            "wait_for_perspective_element": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#calendar-component #perspectiveElement"
                },
                "next_step": "assert_year_view_is_visible"
            },
            "assert_year_view_is_visible": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "#calendar-component #perspectiveElement",
                    "attr": "data-view",
                    "value": "years"
                },
                "next_step": "wait_for_year_to_be_interactable"
            },
            "wait_for_year_to_be_interactable": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#calendar-component #years [data-value='2024']"
                },
                "next_step": "select_a_year"
            },
            "select_a_year": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#calendar-component #years [data-value='2022']"
                },
                "next_step": "wait_for_calendar_dates_to_be_visible"
            },
            "wait_for_calendar_dates_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#calendar-component #calendar"
                },
                "next_step": "assert_current_calendar_view"
            },
            "assert_current_calendar_view": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "#calendar-component #perspectiveElement",
                    "attr": "data-view",
                    "value": "default"
                },
                "next_step": "assert_selected_year"
            },
            "assert_selected_year": {
                "type": "assert",
                "action": "text_content_eq",
                "args": {
                    "query": "#calendar-component #calendar-toolbar #year",
                    "value": "2022"
                },
                "next_step": "select_a_calendar_date"
            },
            "select_a_calendar_date": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#calendar-component #calendar [data-day='12']"
                },
                "next_step": "wait_for_date_input_field_to_be_interactable"
            },
            "wait_for_date_input_field_to_be_interactable": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "[id='model.startOn'] pr-date-time [name='dateInput']"
                },
                "next_step": "assert_date_value"
            },
            "assert_date_value": {
                "type": "assert",
                "action": "value_eq",
                "args": {
                    "query": "[id='model.startOn'] pr-date-time [name='dateInput']",
                    "value": "2022/02/12"
                },
                "next_step": "wait_for_save_button_to_be_visible"
            },
            "wait_for_save_button_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#primary"
                },
                "next_step": "select_save_button"
            },
            "select_save_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#primary"
                },
                "next_step": "assert_date_value_in_input_field"
            },
            "assert_date_value_in_input_field": {
                "type": "assert",
                "action": "value_eq",
                "args": {
                    "query": "[id='model.startOn'] pr-date-time [name='dateInput']",
                    "value": "2022/02/12"
                },
                "next_step": "select_refresh_button"
            },
            "select_refresh_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[data-id='btnRefresh']"
                },
                "next_step": "wait_for_input_field_to_be_visible"
            },
            "wait_for_input_field_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "[id='model.startOn'] pr-date-time [name='dateInput']"
                },
                "next_step": "assert_date_value_in_input_field_is_correct"
            },
            "assert_date_value_in_input_field_is_correct": {
                "type": "assert",
                "action": "value_eq",
                "args": {
                    "query": "[id='model.startOn'] pr-date-time [name='dateInput']",
                    "value": "2022/02/12"
                },
                "next_step": "close_edit_screen"
            },
            "close_edit_screen": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-icon-button#close"
                },
                "next_step": "wait_for_the_record_to_be_visible"
            },
            "wait_for_the_record_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "open_record_again"
            },
            "open_record_again": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "select_planning_tab"
            },
            "select_planning_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[data-id='planning']"
                },
                "next_step": "wait_for_tab_to_be_visible"
            },
            "wait_for_tab_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#planning"
                },
                "next_step": "wait_for_the_date_input_field_to_be_visible"
            },
            "wait_for_the_date_input_field_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "[id='model.startOn'] pr-date-time [name='dateInput']"
                },
                "next_step": "assert_the_date_value"
            },
            "assert_the_date_value": {
                "type": "assert",
                "action": "value_eq",
                "args": {
                    "query": "[id='model.startOn'] pr-date-time [name='dateInput']",
                    "value": "2022/02/12"
                },
                "next_step": "close_edit_screen_window"
            },
            "close_edit_screen_window": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-icon-button#close"
                }
            }
        }
    }
}