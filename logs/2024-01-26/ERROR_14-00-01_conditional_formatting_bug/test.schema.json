{
    "id": "conditional_formatting_bug",
    "sequences": [
        {
            "caption": "Open Resource Dashboard",
            "process": "main"
        },
        {
            "caption": "TC1:Conditional Formatting column panel",
            "process": "TC1"
        },
        {
            "caption": "TC2: Conditional Formatting row panel",
            "process": "TC2"
        },
        {
            "caption": "TC3: Create Conditional Formatting profile",
            "process": "TC3"
        }
    ],
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/contoso/daily/#dashboard/Resource"
                },
                "name": "start"
            }
        }
    },
    "TC1": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#propertiesPanel"
                },
                "next_step": "wait_for_properties_panel_to_be_visible",
                "name": "start"
            },
            "wait_for_properties_panel_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "properties-panel"
                },
                "next_step": "wait_properties_panel_status",
                "name": "wait_for_properties_panel_to_be_visible"
            },
            "wait_properties_panel_status": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "properties-panel",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "select_conditional_formatting_tab",
                "name": "wait_properties_panel_status"
            },
            "select_conditional_formatting_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".panel-options [value='1']"
                },
                "next_step": "wait_for_conditional_formatter_add_button",
                "name": "select_conditional_formatting_tab"
            },
            "wait_for_conditional_formatter_add_button": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".condition-add-button-container [data-call='addColumnFormatter']"
                },
                "next_step": "select_add_button",
                "name": "wait_for_conditional_formatter_add_button"
            },
            "select_add_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".condition-add-button-container [data-call='addColumnFormatter']"
                },
                "next_step": "wait_for_column_window_to_be_visible",
                "name": "select_add_button"
            },
            "wait_for_column_window_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#column"
                },
                "next_step": "perform_add_new_header",
                "name": "wait_for_column_window_to_be_visible"
            },
            "perform_add_new_header": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "#model\\.selectedColumnFormatter\\.conditionTitle input",
                    "value": "Test Condition"
                },
                "next_step": "select_apply_button",
                "name": "perform_add_new_header"
            },
            "select_apply_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".properties-dialog-footer [data-call='applyFormatters']"
                },
                "next_step": "select_back_button",
                "name": "select_apply_button"
            },
            "select_back_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#column pr-sub-group:shadow:.expand-button"
                },
                "next_step": "wait_for_label_to_be_visible",
                "name": "select_back_button"
            },
            "wait_for_label_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#column>pr-sub-group .list li [data-call='setColumnFormatter']"
                }
            }
        }
    },
    "TC2": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#pb-1_row"
                },
                "next_step": "wait_for_conditional_formatter_add_row_button",
                "name": "start"
            },
            "wait_for_conditional_formatter_add_row_button": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".condition-add-button-container [data-call='addRowFormatter']"
                },
                "next_step": "select_add_row_button"
            },
            "select_add_row_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".condition-add-button-container [data-call='addRowFormatter']"
                },
                "next_step": "wait_for_row_window_to_be_visible"
            },
            "wait_for_row_window_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#row"
                },
                "next_step": "perform_add_new_header"
            },
            "perform_add_new_header": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "#model\\.selectedRowFormatter\\.conditionTitle input",
                    "value": "Test Condition"
                },
                "next_step": "select_apply_button"
            },
            "select_apply_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".properties-dialog-footer [data-call='applyFormatters']"
                },
                "next_step": "select_back_button"
            },
            "select_back_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#row pr-sub-group:shadow:.expand-button"
                },
                "next_step": "wait_for_label_to_be_visible"
            },
            "wait_for_label_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#row>pr-sub-group .list li [data-call='setRowFormatter']"
                },
                "next_step": "assert_correct_formatter_label"
            },
            "assert_correct_formatter_label": {
                "type": "assert",
                "action": "text_content_eq",
                "args": {
                    "query": "#row>pr-sub-group .list li [data-call='setRowFormatter']",
                    "value": "Test Condition"
                },
                "next_step": "close_properties_panel"
            },
            "close_properties_panel": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".properties-panel-header .close"
                }
            }
        }
    },
    "TC3": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "set_uuid_variables",
                "args": {
                    "variables": [
                        "$d{profileName}"
                    ]
                },
                "next_step": "open_profiles_panel",
                "name": "start"
            },
            "open_profiles_panel": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#profiles"
                },
                "next_step": "wait_for_profile_window_to_be_visible"
            },
            "wait_for_profile_window_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#profile-switcher"
                },
                "next_step": "select_save_as_button"
            },
            "select_save_as_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#profile-switcher [data-event='newProfile']"
                },
                "next_step": "wait_for_input_field"
            },
            "wait_for_input_field": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#model\\.name input"
                },
                "next_step": "perform_type_text"
            },
            "perform_type_text": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "#model\\.name input",
                    "value": "$d{profileName}"
                },
                "next_step": "select_save_button"
            },
            "select_save_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".dialog-footer #accept"
                },
                "next_step": "close_profile_window"
            },
            "close_profile_window": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#panel5 #side-menu-close"
                },
                "next_step": "open_properties_panel"
            },
            "open_properties_panel": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#propertiesPanel"
                },
                "next_step": "wait_for_properties_panel_to_be_visible"
            },
            "wait_for_properties_panel_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "properties-panel"
                },
                "next_step": "wait_properties_panel_status"
            },
            "wait_properties_panel_status": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "properties-panel",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "select_conditional_formatting_tab"
            },
            "select_conditional_formatting_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".panel-options [value='1']"
                },
                "next_step": "wait_for_label_to_be_visible"
            },
            "wait_for_label_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#column>pr-sub-group .list li [data-call='setColumnFormatter']"
                },
                "next_step": "assert_correct_formatter_label"
            },
            "assert_correct_formatter_label": {
                "type": "assert",
                "action": "text_content_eq",
                "args": {
                    "query": "#column>pr-sub-group .list li [data-call='setColumnFormatter']",
                    "value": "Test Condition"
                },
                "next_step": "select_row_tab"
            },
            "select_row_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#pb-1_row"
                },
                "next_step": "wait_for_row_label_to_be_visible"
            },
            "wait_for_row_label_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#row>pr-sub-group .list li [data-call='setRowFormatter']"
                },
                "next_step": "assert_correct_formatter_row_label"
            },
            "assert_correct_formatter_row_label": {
                "type": "assert",
                "action": "text_content_eq",
                "args": {
                    "query": "#row>pr-sub-group .list li [data-call='setRowFormatter']",
                    "value": "Test Condition"
                }
            }
        }
    }
}