{
    "id": "open_in_new_tab",
    "sequences": [
        {
            "caption": "Open In New Tab Basic",
            "process": "main"
        },
        {
            "caption": "Open In New Tab Within Update",
            "process": "open_in_new_tab_within_update"
        }
    ],
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/contoso/daily/#dashboard/Resource"
                },
                "next_step": "wait_for_dashboard_grid_to_be_ready",
                "name": "start"
            },
            "wait_for_dashboard_grid_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#dashboard-grid",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "open_context_menu",
                "name": "wait_for_dashboard_grid_to_be_ready"
            },
            "open_context_menu": {
                "type": "perform",
                "action": "context_click",
                "args": {
                    "query": ".grid-row[tabindex='0']"
                },
                "next_step": "wait_for_context_menu",
                "name": "open_context_menu"
            },
            "wait_for_context_menu": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "pragma-context-menu",
                    "attr": "aria-hidden",
                    "value": "false"
                },
                "next_step": "select_open_in_new_tab",
                "name": "wait_for_context_menu"
            },
            "select_open_in_new_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-context-menu .listitem[data-id='0']"
                },
                "next_step": "wait_tab_to_open",
                "name": "select_open_in_new_tab"
            },
            "wait_tab_to_open": {
                "type": "wait",
                "action": "window_count",
                "args": {
                    "count": 2
                },
                "next_step": "swap_to_new_tab",
                "name": "wait_tab_to_open"
            },
            "swap_to_new_tab": {
                "type": "perform",
                "action": "switch_to_tab",
                "args": {
                    "index": 1
                },
                "next_step": "wait_for_main_view",
                "name": "swap_to_new_tab"
            },
            "wait_for_main_view": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#main-view"
                },
                "next_step": "wait_for_new_tab_dashboard_grid_to_be_ready",
                "name": "wait_for_main_view"
            },
            "wait_for_new_tab_dashboard_grid_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#dashboard-grid",
                    "attr": "data-loaded",
                    "value": "true"
                },
                "next_step": "wait_for_update_screen_to_open",
                "name": "wait_for_new_tab_dashboard_grid_to_be_ready"
            },
            "wait_for_update_screen_to_open": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pragma-action-dialog dynamic-update"
                },
                "next_step": "close_window",
                "name": "wait_for_update_screen_to_open"
            },
            "close_window": {
                "type": "perform",
                "action": "close_window",
                "args": {
                    "index": 1
                },
                "next_step": "wait_for_tab_to_close",
                "name": "close_window"
            },
            "wait_for_tab_to_close": {
                "type": "wait",
                "action": "window_count",
                "args": {
                    "count": 1
                },
                "name": "wait_for_tab_to_close"
            }
        }
    },
    "open_in_new_tab_within_update": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/contoso/daily/#dashboard/Resource"
                },
                "next_step": "wait_for_dashboard_grid_to_be_ready",
                "name": "start"
            },
            "wait_for_dashboard_grid_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#dashboard-grid",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "open_context_menu"
            },
            "open_context_menu": {
                "type": "perform",
                "action": "context_click",
                "args": {
                    "query": ".grid-row[tabindex='0']"
                },
                "next_step": "wait_for_context_menu"
            },
            "wait_for_context_menu": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "pragma-context-menu",
                    "attr": "aria-hidden",
                    "value": "false"
                },
                "next_step": "select_open_in_new_tab"
            },
            "select_open_in_new_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-context-menu .listitem[data-id='0']"
                },
                "next_step": "wait_for_new_tab_to_open"
            },
            "wait_for_new_tab_to_open": {
                "type": "wait",
                "action": "window_count",
                "args": {
                    "count": 2
                },
                "next_step": "swap_to_new_tab"
            },
            "swap_to_new_tab": {
                "type": "perform",
                "action": "switch_to_tab",
                "args": {
                    "index": 1
                },
                "next_step": "wait_for_main_view"
            },
            "wait_for_main_view": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#main-view"
                },
                "next_step": "wait_for_new_tab_dashboard_grid_to_be_ready"
            },
            "wait_for_new_tab_dashboard_grid_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#dashboard-grid",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "wait_for_update_screen_to_open"
            },
            "wait_for_update_screen_to_open": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pragma-action-dialog dynamic-update"
                },
                "next_step": "wait_for_pager_to_be_ready"
            },
            "wait_for_pager_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#ts-1",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "select_financial_rates_tab"
            },
            "select_financial_rates_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#pb-2_rates"
                },
                "next_step": "wait_for_financial_rate_to_show"
            },
            "wait_for_financial_rate_to_show": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#TradeFinancialRateGrid",
                    "attr": "data-loaded",
                    "value": "true"
                },
                "next_step": "select_financial_rates_item"
            },
            "select_financial_rates_item": {
                "type": "perform",
                "action": "context_click",
                "args": {
                    "query": "#TradeFinancialRateGrid .grid-row[tabindex='0']"
                },
                "next_step": "wait_for_context_menu_on_new_tab"
            },
            "wait_for_context_menu_on_new_tab": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "pragma-context-menu",
                    "attr": "aria-hidden",
                    "value": "false"
                },
                "next_step": "select_context_menu_open_in_new_tab"
            },
            "select_context_menu_open_in_new_tab": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-context-menu .listitem[data-id='0']"
                },
                "next_step": "wait_for_third_tab_to_open"
            },
            "wait_for_third_tab_to_open": {
                "type": "wait",
                "action": "window_count",
                "args": {
                    "count": 3
                },
                "next_step": "swap_to_third_tab"
            },
            "swap_to_third_tab": {
                "type": "perform",
                "action": "switch_to_tab",
                "args": {
                    "index": 2
                },
                "next_step": "wait_for_main_view_to_load"
            },
            "wait_for_main_view_to_load": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#main-view"
                },
                "next_step": "wait_for_third_tab_dashboard_grid_to_be_ready"
            },
            "wait_for_third_tab_dashboard_grid_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#dashboard-grid",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "wait_for_update_screen_to_open_on_third_tab"
            },
            "wait_for_update_screen_to_open_on_third_tab": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pragma-action-dialog dynamic-update"
                },
                "next_step": "close_window"
            },
            "close_window": {
                "type": "perform",
                "action": "close_window",
                "args": {
                    "index": 2
                },
                "next_step": "wait_for_tab_to_close"
            },
            "wait_for_tab_to_close": {
                "type": "wait",
                "action": "window_count",
                "args": {
                    "count": 2
                },
                "next_step": "close_third_tab"
            },
            "close_third_tab": {
                "type": "perform",
                "action": "close_window",
                "args": {
                    "index": 1
                },
                "next_step": "wait_for_third_tab_to_close"
            },
            "wait_for_third_tab_to_close": {
                "type": "wait",
                "action": "window_count",
                "args": {
                    "count": 1
                }
            }
        }
    }
}