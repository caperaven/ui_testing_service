{
    "id": "UDF tests",
    "sequences": [
        {
            "caption": "TC1: Test Both memo type",
            "process": "main"
        }
    ],
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/demo/daily?AuthenticationProviderName=Development Azure Account/#dashboard/RegularAsset",
                    "refresh": true
                },
                "next_step": "wait_for_dashboard_grid_ready",
                "name": "start"
            },
            "wait_for_dashboard_grid_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#dashboard-grid",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "generate_uuid",
                "name": "wait_for_dashboard_grid_ready"
            },
            "generate_uuid": {
                "type": "perform",
                "action": "set_uuid_variables",
                "args": {
                    "variables": [
                        "$d{regularAssetCode}"
                    ]
                },
                "next_step": "create_regular_asset",
                "name": "generate_uuid"
            },
            "create_regular_asset": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "regularAssetCreate",
                    "process": "regular_asset_create",
                    "parameters": {
                        "create_btn_selector": "#create",
                        "regular_asset_dialog_selector": "[data-template='RegularAssetCreate'][status='ready'][data-template='RegularAssetCreate']",
                        "regular_asset_description": "aaf6a05a-62b8-4d4e-8664-faf0175c6d22",
                        "permission_tree_lookup": "VIRTUAL - GLOBAL",
                        "general_ledger_code": "UNKNOWN",
                        "cost_centre_code": "UNKNOWN",
                        "asset_calender_code": "UNKNOWN",
                        "parent_asset_code": "UI-TEST"
                    }
                },
                "next_step": "wait_for_toast",
                "name": "create_regular_asset"
            },
            "wait_for_toast": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pr-toast-item"
                },
                "next_step": "filter_record",
                "name": "wait_for_toast"
            },
            "filter_record": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "filterRecord",
                    "process": "filter_for_record",
                    "parameters": {
                        "fetch_all_records_selector": "[for='dashboard-grid'] #prepared-fetch",
                        "filter_button_selector": "#pb-1 #rd-1 #search-button",
                        "filter_input_selector": "#pb-1 #rd-1 .responsive-dropdown-filter input",
                        "filter_value": "aaf6a05a-62b8-4d4e-8664-faf0175c6d22",
                        "internal_filter_btn_selector": ".dashboard pr-responsive-dropdown#rd-1 #filter"
                    }
                },
                "next_step": "open_record",
                "name": "filter_record"
            },
            "open_record": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": ".grid-row"
                },
                "next_step": "wait_for_dialog",
                "name": "open_record"
            },
            "wait_for_dialog": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "[data-template='RegularAssetUpdate'][status='ready'][data-ready='true']"
                },
                "next_step": "click_overflow",
                "name": "wait_for_dialog"
            },
            "click_overflow": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#ts-1 #btnOptions"
                },
                "next_step": "click_udf",
                "name": "click_overflow"
            },
            "click_udf": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#dropdownList [data-id='tab-pr-user-defined-fields']"
                },
                "next_step": "wait_for_tab",
                "name": "click_udf"
            },
            "wait_for_tab": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#tab-pr-user-defined-fields",
                    "attr": "slot",
                    "value": "body"
                },
                "next_step": "wait_for_udf",
                "name": "wait_for_tab"
            },
            "wait_for_udf": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#userField1 textarea"
                },
                "next_step": "type_value",
                "name": "wait_for_udf"
            },
            "type_value": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "#userField1 textarea",
                    "value": "Hello"
                },
                "next_step": "click_save",
                "name": "type_value"
            },
            "click_save": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#primary"
                },
                "next_step": "wait_for_toast2",
                "name": "click_save"
            },
            "wait_for_toast2": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pr-toast-item"
                },
                "next_step": "wait_for_5",
                "name": "wait_for_toast2"
            },
            "wait_for_5": {
                "type": "wait",
                "action": "time",
                "args": {
                    "timeout": 2
                },
                "next_step": "click_refresh",
                "name": "wait_for_5"
            },
            "click_refresh": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[data-id='btnRefresh']"
                },
                "next_step": "wait_for_toast3",
                "name": "click_refresh"
            },
            "wait_for_toast3": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pr-toast-item"
                },
                "next_step": "wait_for_value",
                "name": "wait_for_toast3"
            },
            "wait_for_value": {
                "type": "wait",
                "action": "text_value",
                "args": {
                    "query": "#userField1 textarea",
                    "value": "Hello",
                    "property": "value"
                },
                "next_step": "delete_text",
                "name": "wait_for_value"
            },
            "delete_text": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "#userField1 textarea",
                    "value": ""
                },
                "next_step": "click_save_again"
            },
            "click_save_again": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#primary"
                }
            }
        }
    }
}