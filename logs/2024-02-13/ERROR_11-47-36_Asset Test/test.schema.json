{
    "id": "Asset Test",
    "sequences": [
        {
            "caption": "TC1: Test Dashboard Label Formatting",
            "process": "main"
        },
        {
            "caption": "TC2: Test alignment, tooltip and label for toolbar items",
            "process": "TC2"
        },
        {
            "caption": "TC3: Test the functionality of the toolbar items",
            "process": "TC3"
        },
        {
            "caption": "TC4: Test Asset Tree Expand And Collapse",
            "process": "TC4"
        }
    ],
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/demo/daily?AuthenticationProviderName=Development Azure Account/#dashboard/AssetTree"
                },
                "next_step": "wait_for_tree",
                "name": "start"
            },
            "wait_for_tree": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#asset-tree",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "assert_correct_spelling",
                "name": "wait_for_tree"
            },
            "assert_correct_spelling": {
                "type": "assert",
                "action": "text_content_eq",
                "args": {
                    "query": "#pb-1 h2",
                    "value": "Asset Tree",
                    "property": "textContent"
                },
                "next_step": "assert_font_family",
                "name": "assert_correct_spelling"
            },
            "assert_font_family": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#pb-1 h2",
                    "property": "font-family",
                    "value": "\"Source Sans Pro\", sans-serif"
                },
                "name": "assert_font_family"
            }
        }
    },
    "TC2": {
        "steps": {
            "start": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "system",
                    "process": "tooltip",
                    "parameters": {
                        "hover": "#ibtn-Search",
                        "value": "Search"
                    }
                },
                "next_step": "perform_hover_properties_panel",
                "name": "start"
            },
            "perform_hover_properties_panel": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "system",
                    "process": "tooltip",
                    "parameters": {
                        "hover": "#ibtn-PropertiesPanel",
                        "value": "Properties Panel"
                    }
                },
                "next_step": "perform_hover_refresh",
                "name": "perform_hover_properties_panel"
            },
            "perform_hover_refresh": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "system",
                    "process": "tooltip",
                    "parameters": {
                        "hover": "#ibtn-Refresh",
                        "value": "Refresh"
                    }
                },
                "next_step": "perform_pre_select_asset_tree_node",
                "name": "perform_hover_refresh"
            },
            "perform_pre_select_asset_tree_node": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#pb-1 .tree-item[data-id]"
                },
                "next_step": "assert_add_button_is_visible",
                "name": "perform_pre_select_asset_tree_node"
            },
            "assert_add_button_is_visible": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "#ibtn-Add",
                    "attr": "aria-hidden",
                    "value": "false",
                    "operator": "eq"
                },
                "next_step": "perform_hover_add",
                "name": "assert_add_button_is_visible"
            },
            "perform_hover_add": {
                "type": "perform",
                "action": "hover_over_element",
                "args": {
                    "query": "#ibtn-Add"
                },
                "next_step": "assert_search_alignment_touch_area_width",
                "name": "perform_hover_add"
            },
            "assert_search_alignment_touch_area_width": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-Search",
                    "property": "width",
                    "value": "40px"
                },
                "next_step": "assert_add_alignment_touch_area_width",
                "name": "assert_search_alignment_touch_area_width"
            },
            "assert_add_alignment_touch_area_width": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-Add",
                    "property": "width",
                    "value": "40px"
                },
                "next_step": "assert_properties_panel_alignment_touch_area_width",
                "name": "assert_add_alignment_touch_area_width"
            },
            "assert_properties_panel_alignment_touch_area_width": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-PropertiesPanel",
                    "property": "width",
                    "value": "40px"
                },
                "next_step": "assert_refresh_alignment_touch_area_width",
                "name": "assert_properties_panel_alignment_touch_area_width"
            },
            "assert_refresh_alignment_touch_area_width": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-Refresh",
                    "property": "width",
                    "value": "40px"
                },
                "next_step": "assert_search_alignment_touch_area_height",
                "name": "assert_refresh_alignment_touch_area_width"
            },
            "assert_search_alignment_touch_area_height": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-Search",
                    "property": "height",
                    "value": "40px"
                },
                "next_step": "assert_add_alignment_touch_area_height",
                "name": "assert_search_alignment_touch_area_height"
            },
            "assert_add_alignment_touch_area_height": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-Add",
                    "property": "height",
                    "value": "40px"
                },
                "next_step": "assert_properties_panel_alignment_touch_area_height",
                "name": "assert_add_alignment_touch_area_height"
            },
            "assert_properties_panel_alignment_touch_area_height": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-PropertiesPanel",
                    "property": "height",
                    "value": "40px"
                },
                "next_step": "assert_refresh_alignment_touch_area_height",
                "name": "assert_properties_panel_alignment_touch_area_height"
            },
            "assert_refresh_alignment_touch_area_height": {
                "type": "assert",
                "action": "style_property_eq",
                "args": {
                    "query": "#ibtn-Refresh",
                    "property": "height",
                    "value": "40px"
                },
                "name": "assert_refresh_alignment_touch_area_height"
            }
        }
    },
    "TC3": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#ibtn-Search"
                },
                "next_step": "wait_for_search_panel_to_be_visible",
                "name": "start"
            },
            "wait_for_search_panel_to_be_visible": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#asset-tree-split-view",
                    "attr": "class",
                    "value": "visible left-spaced"
                },
                "next_step": "perform_close_search_panel",
                "name": "wait_for_search_panel_to_be_visible"
            },
            "perform_close_search_panel": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#ibtn-close"
                },
                "next_step": "perform_select_properties_panel",
                "name": "perform_close_search_panel"
            },
            "perform_select_properties_panel": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#ibtn-PropertiesPanel"
                },
                "next_step": "wait_for_properties_panel_to_exist",
                "name": "perform_select_properties_panel"
            },
            "wait_for_properties_panel_to_exist": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".visible .properties-panel-wrapper"
                },
                "next_step": "perform_close_properties_panel",
                "name": "wait_for_properties_panel_to_exist"
            },
            "perform_close_properties_panel": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".properties-panel-wrapper .close"
                },
                "next_step": "perform_pre_asset_tree_node_to_refresh",
                "name": "perform_close_properties_panel"
            },
            "perform_pre_asset_tree_node_to_refresh": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#pb-1 .tree-item[data-id]"
                },
                "next_step": "perform_refresh",
                "name": "perform_pre_asset_tree_node_to_refresh"
            },
            "perform_refresh": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#ibtn-Refresh"
                },
                "next_step": "wait_for_refresh_status_to_be_visible",
                "name": "perform_refresh"
            },
            "wait_for_refresh_status_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".success"
                },
                "name": "wait_for_refresh_status_to_be_visible"
            }
        }
    },
    "TC4": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[data-id = 'RegularAsset_1'] .tree-expand-arrow-container"
                },
                "next_step": "assert_root_asset_is_collapsed",
                "name": "start"
            },
            "assert_root_asset_is_collapsed": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "[data-id = 'RegularAsset_1'] .tree-expand-arrow-container svg",
                    "attr": "aria-expanded",
                    "value": "false",
                    "operator": "eq"
                },
                "next_step": "perform_expand_root_asset",
                "name": "assert_root_asset_is_collapsed"
            },
            "perform_expand_root_asset": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".tree-expand-arrow-container"
                },
                "next_step": "assert_root_asset_is_expanded",
                "name": "perform_expand_root_asset"
            },
            "assert_root_asset_is_expanded": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "[data-id = 'RegularAsset_1'] .tree-expand-arrow-container svg",
                    "attr": "aria-expanded",
                    "value": "true",
                    "operator": "eq"
                },
                "next_step": "perform_expand_regular_asset_node",
                "name": "assert_root_asset_is_expanded"
            },
            "perform_expand_regular_asset_node": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[data-id ='RegularAsset_1002'] .tree-expand-arrow-container"
                },
                "next_step": "wait_regular_asset_node_expanded",
                "name": "perform_expand_regular_asset_node"
            },
            "wait_regular_asset_node_expanded": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "[data-id='RegularAsset_1002'] .tree-expand-arrow-container svg",
                    "attr": "aria-expanded",
                    "value": "true",
                    "timeout": 40
                },
                "next_step": "perform_collapse_regular_asset_node",
                "name": "wait_regular_asset_node_expanded"
            },
            "perform_collapse_regular_asset_node": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[data-id ='RegularAsset_1002'] .tree-expand-arrow-container"
                },
                "next_step": "wait_regular_asset_node_collapsed"
            },
            "wait_regular_asset_node_collapsed": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "[data-id ='RegularAsset_1002'] .tree-expand-arrow-container svg",
                    "attr": "aria-expanded",
                    "value": "false",
                    "timeout": 40
                }
            }
        }
    }
}