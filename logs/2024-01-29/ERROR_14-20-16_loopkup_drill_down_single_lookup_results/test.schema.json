{
    "id": "loopkup_drill_down_single_lookup_results",
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/contoso/daily/#dashboard/WorkOrder"
                },
                "next_step": "set_uuid_variables",
                "name": "start"
            },
            "set_uuid_variables": {
                "type": "perform",
                "action": "set_uuid_variables",
                "args": {
                    "variables": [
                        "$d{codeName}",
                        "$d{description}"
                    ]
                },
                "next_step": "create_work_order_process",
                "name": "set_uuid_variables"
            },
            "create_work_order_process": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "workOrderCreate",
                    "process": "work_order_create",
                    "parameters": {
                        "create_btn_selector": "pragma-panel-bar #create",
                        "description_field_selector": "97c6d835-b17f-4be5-aec6-d17f9d70a383",
                        "work_required_field_selector": "${description}",
                        "work_order_code": "7b3d6e1b-a2ea-4d76-916f-8677bb791f86"
                    }
                },
                "next_step": "wait_for_work_order_to_be_created",
                "name": "create_work_order_process"
            },
            "wait_for_work_order_to_be_created": {
                "type": "wait",
                "action": "time",
                "args": {
                    "timeout": 1
                },
                "next_step": "filter_work_order_record",
                "name": "wait_for_work_order_to_be_created"
            },
            "filter_work_order_record": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "filterRecord",
                    "process": "filter_for_record",
                    "parameters": {
                        "fetch_all_records_selector": "[for='dashboard-grid'] #prepared-fetch",
                        "filter_button_selector": ".dashboard pr-responsive-dropdown#rd-3 #search-button",
                        "filter_input_selector": ".dashboard pr-responsive-dropdown#rd-3 pragma-filter input[type='search']",
                        "filter_value": "7b3d6e1b-a2ea-4d76-916f-8677bb791f86",
                        "internal_filter_btn_selector": ".dashboard pr-responsive-dropdown#rd-3 #filter"
                    }
                },
                "next_step": "dblClick_first_wo_record",
                "name": "filter_work_order_record"
            },
            "dblClick_first_wo_record": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": "pragma-advanced-grid#dashboard-grid .grid-row"
                },
                "next_step": "wait_for_lookup_button",
                "name": "dblClick_first_wo_record"
            },
            "wait_for_lookup_button": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "[id='model.assetCode'] #btnLookup",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "click_lookup",
                "name": "wait_for_lookup_button"
            },
            "click_lookup": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-action-dialog.small [id='model.assetCode'] #btnLookup"
                },
                "next_step": "wait_for_lookup_grid",
                "name": "click_lookup"
            },
            "wait_for_lookup_grid": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#assetCode-lookup",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "wait_for_lookup_search_filter",
                "name": "wait_for_lookup_grid"
            },
            "wait_for_lookup_search_filter": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#search-toolbar pragma-filter input[type=search]"
                },
                "next_step": "type_in_lookup_search_filter",
                "name": "wait_for_lookup_search_filter"
            },
            "type_in_lookup_search_filter": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "#search-toolbar pragma-filter input[type=search]",
                    "value": "BOIL001"
                },
                "next_step": "click_filter_button",
                "name": "type_in_lookup_search_filter"
            },
            "click_filter_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-lookup pragma-icon-button#filter"
                },
                "next_step": "wait_for_lookup_grid_to_be_ready",
                "name": "click_filter_button"
            },
            "wait_for_lookup_grid_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "#assetCode-lookup",
                    "attr": "status",
                    "value": "ready"
                },
                "next_step": "select_first_lookup_record",
                "name": "wait_for_lookup_grid_to_be_ready"
            },
            "select_first_lookup_record": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-lookup .grid-row"
                },
                "next_step": "click_accept",
                "name": "select_first_lookup_record"
            },
            "click_accept": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#accept"
                },
                "next_step": "wait_for_wo_update",
                "name": "click_accept"
            },
            "wait_for_wo_update": {
                "type": "wait",
                "action": "time",
                "args": {
                    "timeout": 2
                },
                "next_step": "assert_assetCode_value",
                "name": "wait_for_wo_update"
            },
            "assert_assetCode_value": {
                "type": "assert",
                "action": "value_eq",
                "args": {
                    "query": "pragma-action-dialog [data-template=WorkOrderUpdate] #lbl-assetCode",
                    "value": "BOIL001",
                    "property": "value"
                },
                "next_step": "dblClick_to_drill_down_input",
                "name": "assert_assetCode_value"
            },
            "dblClick_to_drill_down_input": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": "pragma-action-dialog [data-template=WorkOrderUpdate] #lbl-assetCode"
                },
                "next_step": "wait_for_detailed_screen",
                "name": "dblClick_to_drill_down_input"
            },
            "wait_for_detailed_screen": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pragma-action-dialog [data-template=RegularAssetUpdate]"
                },
                "next_step": "assert_assetCode_on_detailed_screen",
                "name": "wait_for_detailed_screen"
            },
            "assert_assetCode_on_detailed_screen": {
                "type": "assert",
                "action": "value_eq",
                "args": {
                    "query": "pragma-action-dialog [data-template=RegularAssetUpdate] #lbl-code",
                    "value": "BOIL001"
                }
            }
        }
    }
}