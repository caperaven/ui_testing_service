{
    "id": "Work Request Status Change Component",
    "sequences": [
        {
            "caption": "TC1 - Generate Work Request",
            "process": "main"
        },
        {
            "caption": "TC2 - Change Work Request Status And Test Status Change Component",
            "process": "TC2"
        }
    ],
    "main": {
        "steps": {
            "start": {
                "type": "perform",
                "action": "navigate",
                "args": {
                    "url": "https://onkeydev.pragmaproducts.com/demo/daily?AuthenticationProviderName=Development Azure Account/#dashboard/WorkRequest"
                },
                "next_step": "generate_uuid",
                "name": "start"
            },
            "generate_uuid": {
                "type": "perform",
                "action": "set_uuid_variables",
                "args": {
                    "variables": [
                        "$d{id}"
                    ]
                },
                "next_step": "perform_click_create_work_request_button",
                "name": "generate_uuid"
            },
            "perform_click_create_work_request_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#create"
                },
                "next_step": "wait_for_work_request_form_to_be_ready",
                "name": "perform_click_create_work_request_button"
            },
            "wait_for_work_request_form_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "[data-template='WorkRequestCreate']",
                    "attr": "data-ready",
                    "value": "true"
                },
                "next_step": "add_code",
                "name": "wait_for_work_request_form_to_be_ready"
            },
            "add_code": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "#lbl-code",
                    "value": "b2e5d026-938b-4111-8e0f-9c9a4e7a8e45"
                },
                "next_step": "wait_for_permission_tree_code_lookupup",
                "name": "add_code"
            },
            "wait_for_permission_tree_code_lookupup": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "[id='model.permissionTreeCode'] #btnLookup"
                },
                "next_step": "select_permission_tree_code_lookupup",
                "name": "wait_for_permission_tree_code_lookupup"
            },
            "select_permission_tree_code_lookupup": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[id='model.permissionTreeCode'] #btnLookup"
                },
                "next_step": "wait_first_lookup",
                "name": "select_permission_tree_code_lookupup"
            },
            "wait_first_lookup": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#collectionForm .items-container-parent .grid-row"
                },
                "next_step": "select_first_lookup",
                "name": "wait_first_lookup"
            },
            "select_first_lookup": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": "#collectionForm .items-container-parent .grid-row"
                },
                "next_step": "wait_for_work_request_field",
                "name": "select_first_lookup"
            },
            "wait_for_work_request_field": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "[id='model.workRequested'] #lbl-workRequested"
                },
                "next_step": "type_work_requested",
                "name": "wait_for_work_request_field"
            },
            "type_work_requested": {
                "type": "perform",
                "action": "type_text",
                "args": {
                    "query": "[id='model.workRequested'] #lbl-workRequested",
                    "value": "Test Work Request"
                },
                "next_step": "wait_for_site_code_field",
                "name": "type_work_requested"
            },
            "wait_for_site_code_field": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "[id='model.siteCode'] #btnLookup"
                },
                "next_step": "select_site_code_lookup",
                "name": "wait_for_site_code_field"
            },
            "select_site_code_lookup": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "[id='model.siteCode'] #btnLookup"
                },
                "next_step": "wait_for_lookup_window",
                "name": "select_site_code_lookup"
            },
            "wait_for_lookup_window": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#collectionForm .items-container-parent .grid-row"
                },
                "next_step": "select_second_lookup",
                "name": "wait_for_lookup_window"
            },
            "select_second_lookup": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": "#collectionForm .items-container-parent .grid-row"
                },
                "next_step": "wait_for_save_button",
                "name": "select_second_lookup"
            },
            "wait_for_save_button": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "#primary"
                },
                "next_step": "perform_click_save_button",
                "name": "wait_for_save_button"
            },
            "perform_click_save_button": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#primary"
                },
                "next_step": "wait_for_grid_to_be_visible",
                "name": "perform_click_save_button"
            },
            "wait_for_grid_to_be_visible": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "filter_grid",
                "name": "wait_for_grid_to_be_visible"
            },
            "filter_grid": {
                "type": "system",
                "action": "template",
                "args": {
                    "schema": "filterRecord",
                    "process": "filter_for_record",
                    "parameters": {
                        "fetch_all_records_selector": "[for='dashboard-grid'] #prepared-fetch",
                        "filter_button_selector": "#search-button",
                        "filter_input_selector": "#pb-1 #rd-1 .responsive-dropdown-filter input",
                        "filter_value": "b2e5d026-938b-4111-8e0f-9c9a4e7a8e45",
                        "internal_filter_btn_selector": "#rd-1 pragma-icon-button#filter"
                    }
                },
                "name": "filter_grid"
            }
        }
    },
    "TC2": {
        "steps": {
            "start": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "perform_click_on_first_record",
                "name": "start"
            },
            "perform_click_on_first_record": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "perform_select_status_change_component",
                "name": "perform_click_on_first_record"
            },
            "perform_select_status_change_component": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#work-request-dashboard-status-button"
                },
                "next_step": "wait_for_context_menu_to_be_ready",
                "name": "perform_select_status_change_component"
            },
            "wait_for_context_menu_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "context-menu",
                    "attr": "data-ready",
                    "value": "true"
                },
                "next_step": "select_new_status",
                "name": "wait_for_context_menu_to_be_ready"
            },
            "select_new_status": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "context-menu .popup .scrollbar li[data-tags='ap approved approved']"
                },
                "next_step": "perform_open_edit_screen",
                "name": "select_new_status"
            },
            "perform_open_edit_screen": {
                "type": "perform",
                "action": "dbl_click",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "wait_for_edit_screen_to_be_ready"
            },
            "wait_for_edit_screen_to_be_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "[data-template='WorkRequestUpdate']",
                    "attr": "data-ready",
                    "value": "true"
                },
                "next_step": "perform_open_status_list"
            },
            "perform_open_status_list": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#work-request-update-status-button"
                },
                "next_step": "wait_for_context_menu_to_be_ready_for_assert"
            },
            "wait_for_context_menu_to_be_ready_for_assert": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "context-menu",
                    "attr": "data-ready",
                    "value": "true"
                },
                "next_step": "wait_for_list_element_to_be_ready"
            },
            "wait_for_list_element_to_be_ready": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "context-menu .popup .scrollbar li[data-tags='ap approved approved']"
                },
                "next_step": "assert_status_is_set_to_ap_approved"
            },
            "assert_status_is_set_to_ap_approved": {
                "type": "assert",
                "action": "attribute_eq",
                "args": {
                    "query": "context-menu .popup .scrollbar li[data-tags='ap approved approved']",
                    "attr": "aria-selected",
                    "value": "true"
                },
                "next_step": "perform_select_new_edit_status_change"
            },
            "perform_select_new_edit_status_change": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "context-menu .popup .scrollbar li[data-tags='aa awaitingapproval awaiting approval']"
                },
                "next_step": "wait_for_edit_close_button"
            },
            "wait_for_edit_close_button": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": "pragma-icon-button#close"
                },
                "next_step": "close_edit_screen"
            },
            "close_edit_screen": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "pragma-icon-button#close"
                },
                "next_step": "wait_for_grid_item"
            },
            "wait_for_grid_item": {
                "type": "wait",
                "action": "element",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "select_grid_item"
            },
            "select_grid_item": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": ".items-container-parent .grid-row"
                },
                "next_step": "open_context_menu_for_status_list_assertion"
            },
            "open_context_menu_for_status_list_assertion": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "#work-request-dashboard-status-button"
                },
                "next_step": "wait_for_context_menu_to_be_ready_for_assertion"
            },
            "wait_for_context_menu_to_be_ready_for_assertion": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "context-menu",
                    "attr": "data-ready",
                    "value": "true"
                },
                "next_step": "wait_for_list_element_to_be_ready_data_ready"
            },
            "wait_for_list_element_to_be_ready_data_ready": {
                "type": "wait",
                "action": "attribute",
                "args": {
                    "query": "context-menu .popup .scrollbar li[data-tags='aa awaitingapproval awaiting approval']",
                    "attr": "aria-selected",
                    "value": "true"
                },
                "next_step": "close_context_menu"
            },
            "close_context_menu": {
                "type": "perform",
                "action": "click",
                "args": {
                    "query": "context-menu .back"
                }
            }
        }
    }
}